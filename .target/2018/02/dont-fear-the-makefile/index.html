<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="generator" content="Hugo 0.37.1" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dont Fear the Makefile | Max Strübing</title>
    <meta name="description" content="A simple Makefile tutorial describing the basics and todays possible usage">
    <meta name="keywords" content="unix, linux, programming, tutorial, build-tools">
    
    
    
    
    

  <meta name="author" content="Max Strübing">


    <meta property="og:title" content="Dont Fear the Makefile" />
<meta property="og:description" content="A simple Makefile tutorial describing the basics and todays possible usage" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://maex.me/2018/02/dont-fear-the-makefile/" />

  <meta property="og:image" content="https://maex.me/img/gnu.png" />



<meta property="article:published_time" content="2018-02-16T00:00:00&#43;01:00"/>

<meta property="article:modified_time" content="2018-02-12T18:15:29&#43;01:00"/>











    




    <meta name="theme-color" content="#000">

    
    
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-72326389-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

    
    <link rel="canonical" href="https://maex.me/2018/02/dont-fear-the-makefile/">
    
    
    <link rel="icon" sizes="any" href="data:image/svg+xml,%3Csvg%20viewBox='0%200%2046%2045'%20xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3EAfter%20Dark%3C/title%3E%3Cpath%20d='M.708%2045L23%20.416%2045.292%2045H.708zM35%2038L23%2019%2011%2038h24z'%20fill='%23000'/%3E%3C/svg%3E">

    <style>
  html{font-size:12px}*{box-sizing:border-box;text-rendering:geometricPrecision}body{font-size:1rem;line-height:1.5rem;margin:0;font-family:Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif;word-wrap:break-word}h1,h2,h3,h4,h5,h6{line-height:1.3em}fieldset{border:none;padding:0;margin:0}pre{padding:2rem;margin:1.75rem 0;background-color:#fff;border:1px solid #ccc;overflow:auto}code[class*=language-],pre[class*=language-],pre code{font-weight:100;text-shadow:none;margin:1.75rem 0}a{cursor:pointer;color:#ff2e88;text-decoration:none;border-bottom:1px solid #ff2e88}a:hover{background-color:#ff2e88;color:#fff}.grid{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.grid.\-top{-ms-flex-align:start;-ms-grid-row-align:flex-start;align-items:flex-start}.grid.\-middle{-ms-flex-align:center;-ms-grid-row-align:center;align-items:center}.grid.\-bottom{-ms-flex-align:end;-ms-grid-row-align:flex-end;align-items:flex-end}.grid.\-stretch{-ms-flex-align:stretch;-ms-grid-row-align:stretch;align-items:stretch}.grid.\-baseline{-ms-flex-align:baseline;-ms-grid-row-align:baseline;align-items:baseline}.grid.\-left{-ms-flex-pack:start;justify-content:flex-start}.grid.\-center{-ms-flex-pack:center;justify-content:center}.grid.\-right{-ms-flex-pack:end;justify-content:flex-end}.grid.\-between{-ms-flex-pack:justify;justify-content:space-between}.grid.\-around{-ms-flex-pack:distribute;justify-content:space-around}.cell{-ms-flex:1;flex:1;box-sizing:border-box}@media screen and (min-width:768px){.cell.\-1of12{-ms-flex:0 0 8.33333%;flex:0 0 8.33333%}.cell.\-2of12{-ms-flex:0 0 16.66667%;flex:0 0 16.66667%}.cell.\-3of12{-ms-flex:0 0 25%;flex:0 0 25%}.cell.\-4of12{-ms-flex:0 0 33.33333%;flex:0 0 33.33333%}.cell.\-5of12{-ms-flex:0 0 41.66667%;flex:0 0 41.66667%}.cell.\-6of12{-ms-flex:0 0 50%;flex:0 0 50%}.cell.\-7of12{-ms-flex:0 0 58.33333%;flex:0 0 58.33333%}.cell.\-8of12{-ms-flex:0 0 66.66667%;flex:0 0 66.66667%}.cell.\-9of12{-ms-flex:0 0 75%;flex:0 0 75%}.cell.\-10of12{-ms-flex:0 0 83.33333%;flex:0 0 83.33333%}.cell.\-11of12{-ms-flex:0 0 91.66667%;flex:0 0 91.66667%}}@media screen and (max-width:768px){.grid{-ms-flex-direction:column;flex-direction:column}.cell{-ms-flex:0 0 auto;flex:0 0 auto}}.hack,.hack blockquote,.hack code,.hack em,.hack h1,.hack h2,.hack h3,.hack h4,.hack h5,.hack h6,.hack strong{font-size:1rem;font-style:normal;font-family:Menlo,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New,monospace,serif}.hack blockquote,.hack code,.hack em,.hack strong{line-height:20px}.hack blockquote,.hack code,.hack footer,.hack h1,.hack h2,.hack h3,.hack h4,.hack h5,.hack h6,.hack header,.hack li,.hack ol,.hack p,.hack section,.hack ul{float:none;margin:0;padding:0}.hack blockquote,.hack h1,.hack ol,.hack p,.hack ul{margin-top:20px;margin-bottom:20px}.hack h1{position:relative;display:inline-block;display:table-cell;padding:20px 0 30px;margin:0;overflow:hidden}.hack h1:after{content:"====================================================================================================";position:absolute;bottom:10px;left:0}.hack h1+*{margin-top:0}.hack h2,.hack h3,.hack h4,.hack h5,.hack h6{position:relative;margin-bottom:1.75rem}.hack h2:before,.hack h3:before,.hack h4:before,.hack h5:before,.hack h6:before{display:inline}.hack h2:before{content:"## "}.hack h3:before{content:"### "}.hack h4:before{content:"#### "}.hack h5:before{content:"##### "}.hack h6:before{content:"###### "}.hack li{position:relative;display:block;padding-left:20px}.hack li:after{position:absolute;top:0;left:0}.hack ul>li:after{content:"-"}.hack ol{counter-reset:a}.hack ol>li:after{content:counter(a) ".";counter-increment:a}.hack blockquote{position:relative;padding-left:17px;padding-left:2ch;overflow:hidden}.hack blockquote:after{content:">\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>\A>";white-space:pre;position:absolute;top:0;left:0;line-height:20px}.hack em:after,.hack em:before{content:"*";display:inline}.hack pre code:after,.hack pre code:before{content:''}.hack code{font-weight:700}.hack code:after,.hack code:before{content:"`";display:inline}.hack hr{position:relative;height:20px;overflow:hidden;border:0;margin:20px 0}.hack hr:after{content:"----------------------------------------------------------------------------------------------------";position:absolute;top:0;left:0;line-height:20px;width:100%;word-wrap:break-word}@-moz-document url-prefix(){.hack h1{display:block}}.hack-ones ol>li:after{content:"1."}p{margin:0 0 1.75rem}.container{max-width:70rem}.container,.container-fluid{margin:0 auto;padding:0 1rem}.inner{padding:1rem}.inner2x{padding:2rem}.pull-left{float:left}.pull-right{float:right}.progress-bar{height:8px;opacity:.8;background-color:#ccc;margin-top:12px}.progress-bar.progress-bar-show-percent{margin-top:38px}.progress-bar-filled{background-color:gray;height:100%;transition:width .3s ease;position:relative;width:0}.progress-bar-filled:before{content:'';border:6px solid transparent;border-top-color:gray;position:absolute;top:-12px;right:-6px}.progress-bar-filled:after{color:gray;content:attr(data-filled);display:block;font-size:12px;white-space:nowrap;position:absolute;border:6px solid transparent;top:-38px;right:0;-ms-transform:translateX(50%);transform:translateX(50%)}table{width:100%;border-collapse:collapse;margin:1.75rem 0;color:#778087}table td,table th{vertical-align:top;border:1px solid #ccc;line-height:15px;padding:10px}table thead th{font-size:10px}table tbody td:first-child{font-weight:700;color:#333}.form{width:30rem}.form-group{margin-bottom:1.75rem;overflow:auto}.form-group label{border-bottom:2px solid #ccc;color:#333;width:10rem;display:inline-block;height:38px;line-height:38px;padding:0;float:left;position:relative}.form-group.form-success label{color:#4caf50!important;border-color:#4caf50!important}.form-group.form-warning label{color:#ff9800!important;border-color:#ff9800!important}.form-group.form-error label{color:#f44336!important;border-color:#f44336!important}.form-control{outline:none;border:none;border-bottom:2px solid #ccc;padding:.5rem 0;width:20rem;height:38px;background-color:transparent}.form-control:focus{border-color:#555}.form-group.form-textarea label:after{position:absolute;content:'';width:2px;background-color:#fff;right:-2px;top:0;bottom:0}textarea.form-control{height:auto;resize:none;padding:1rem 0;border-bottom:2px solid #ccc;border-left:2px solid #ccc;padding:.5rem}select.form-control{border-radius:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none}.help-block{color:#999;margin-top:.5rem}.form-actions{margin-bottom:1.75rem}.btn{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;outline:none;padding:.65rem 2rem;font-size:1rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;z-index:1}.btn:active{box-shadow:inset 0 1px 3px rgba(0,0,0,.12)}.btn.btn-ghost{border-color:#757575;color:#757575;background-color:transparent}.btn.btn-ghost:focus,.btn.btn-ghost:hover{border-color:#424242;color:#424242;z-index:2}.btn.btn-ghost:hover{background-color:transparent}.btn-block{width:100%;display:-ms-flexbox;display:flex}.btn-default{color:#fff;background-color:#e0e0e0;border:1px solid #e0e0e0;color:#333}.btn-default:focus:not(.btn-ghost),.btn-default:hover{background-color:#dcdcdc;border-color:#dcdcdc}.btn-success{color:#fff;background-color:#4caf50;border:1px solid #4caf50}.btn-success:focus:not(.btn-ghost),.btn-success:hover{background-color:#43a047;border-color:#43a047}.btn-success.btn-ghost{border-color:#4caf50;color:#4caf50}.btn-success.btn-ghost:focus,.btn-success.btn-ghost:hover{border-color:#388e3c;color:#388e3c;z-index:2}.btn-error{color:#fff;background-color:#f44336;border:1px solid #f44336}.btn-error:focus:not(.btn-ghost),.btn-error:hover{background-color:#e53935;border-color:#e53935}.btn-error.btn-ghost{border-color:#f44336;color:#f44336}.btn-error.btn-ghost:focus,.btn-error.btn-ghost:hover{border-color:#d32f2f;color:#d32f2f;z-index:2}.btn-warning{color:#fff;background-color:#ff9800;border:1px solid #ff9800}.btn-warning:focus:not(.btn-ghost),.btn-warning:hover{background-color:#fb8c00;border-color:#fb8c00}.btn-warning.btn-ghost{border-color:#ff9800;color:#ff9800}.btn-warning.btn-ghost:focus,.btn-warning.btn-ghost:hover{border-color:#f57c00;color:#f57c00;z-index:2}.btn-info{color:#fff;background-color:#00bcd4;border:1px solid #00bcd4}.btn-info:focus:not(.btn-ghost),.btn-info:hover{background-color:#00acc1;border-color:#00acc1}.btn-info.btn-ghost{border-color:#00bcd4;color:#00bcd4}.btn-info.btn-ghost:focus,.btn-info.btn-ghost:hover{border-color:#0097a7;color:#0097a7;z-index:2}.btn-primary{color:#fff;background-color:#2196f3;border:1px solid #2196f3}.btn-primary:focus:not(.btn-ghost),.btn-primary:hover{background-color:#1e88e5;border-color:#1e88e5}.btn-primary.btn-ghost{border-color:#2196f3;color:#2196f3}.btn-primary.btn-ghost:focus,.btn-primary.btn-ghost:hover{border-color:#1976d2;color:#1976d2;z-index:2}.btn-group{overflow:auto}.btn-group .btn{float:left}.btn-group .btn-ghost:not(:first-child){margin-left:-1px}.card{border:1px solid #ccc}.card .card-header{color:#333;text-align:center;background-color:#ddd;padding:.5rem 0}.alert{color:#ccc;padding:1rem;border:1px solid #ccc;margin-bottom:1.75rem}.alert-success{color:#4caf50;border-color:#4caf50}.alert-error{color:#f44336;border-color:#f44336}.alert-info{color:#00bcd4;border-color:#00bcd4}.alert-warning{color:#ff9800;border-color:#ff9800}.media:not(:last-child){margin-bottom:1.25rem}.media-left{padding-right:1rem}.media-left,.media-right{display:table-cell;vertical-align:top}.media-right{padding-left:1rem}.media-body{display:table-cell;vertical-align:top}.media-heading{font-size:1.16667rem;font-weight:700}.media-content{margin-top:.3rem}.avatarholder,.placeholder{background-color:#f0f0f0;text-align:center;color:#b9b9b9;font-size:1rem;border:1px solid #f0f0f0}.avatarholder{width:48px;height:48px;line-height:46px;font-size:2rem;background-size:cover;background-position:50%;background-repeat:no-repeat}.avatarholder.rounded{border-radius:33px}.loading{display:inline-block;content:'&nbsp;';height:20px;width:20px;margin:0 .5rem;animation:a .6s infinite linear;border:2px solid #e91e63;border-right-color:transparent;border-radius:50%}.btn .loading{margin-bottom:0;width:14px;height:14px}.btn div.loading{float:left}.alert .loading{margin-bottom:-5px}@keyframes a{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.menu{width:100%}.menu .menu-item{display:block;color:#616161;border-color:#616161}.menu .menu-item.active,.menu .menu-item:hover{color:#000;border-color:#000;background-color:transparent}@media screen and (max-width:768px){.form-group label{display:block;border-bottom:none;width:100%}.form-group.form-textarea label:after{display:none}.form-control{width:100%}textarea.form-control{border-left:none;padding:.5rem 0}pre::-webkit-scrollbar{height:3px}}@media screen and (max-width:480px){.form{width:100%}}.dark{color:#ccc}.dark,.dark pre{background-color:#000}.dark pre{padding:0;border:none}.dark pre code{color:#00bcd4}.dark h1 a,.dark h2 a,.dark h3 a,.dark h4 a,.dark h5 a{color:#ccc}.dark code,.dark strong{color:#fff}.dark code{font-weight:100}.dark table{color:#ccc}.dark table td,.dark table th{border-color:#444}.dark table tbody td:first-child{color:#fff}.dark .form-group label{color:#ccc;border-color:rgba(95,95,95,.78)}.dark .form-group.form-textarea label:after{background-color:#000}.dark .form-control{color:#ccc;border-color:rgba(95,95,95,.78)}.dark .form-control:focus{border-color:#ccc;color:#ccc}.dark textarea.form-control{color:#ccc}.dark .card{border-color:rgba(95,95,95,.78)}.dark .card .card-header{background-color:transparent;color:#ccc;border-bottom:1px solid rgba(95,95,95,.78)}.dark .btn.btn-ghost.btn-default{border-color:#ababab;color:#ababab}.dark .btn.btn-ghost.btn-default:focus,.dark .btn.btn-ghost.btn-default:hover{border-color:#9c9c9c;color:#9c9c9c;z-index:1}.dark .btn.btn-ghost.btn-default:focus,.dark .btn.btn-ghost.btn-default:hover{border-color:#e0e0e0;color:#e0e0e0}.dark .btn.btn-ghost.btn-primary:focus,.dark .btn.btn-ghost.btn-primary:hover{border-color:#64b5f6;color:#64b5f6}.dark .btn.btn-ghost.btn-success:focus,.dark .btn.btn-ghost.btn-success:hover{border-color:#81c784;color:#81c784}.dark .btn.btn-ghost.btn-info:focus,.dark .btn.btn-ghost.btn-info:hover{border-color:#4dd0e1;color:#4dd0e1}.dark .btn.btn-ghost.btn-error:focus,.dark .btn.btn-ghost.btn-error:hover{border-color:#e57373;color:#e57373}.dark .btn.btn-ghost.btn-warning:focus,.dark .btn.btn-ghost.btn-warning:hover{border-color:#ffb74d;color:#ffb74d}.dark .avatarholder,.dark .placeholder{background-color:transparent;border-color:#333}.dark .menu .menu-item{color:#ccc;border-color:rgba(95,95,95,.78)}.dark .menu .menu-item.active,.dark .menu .menu-item:hover{color:#fff;border-color:#ccc}
  :root {
  --screen-size-small: 30em; /* breakpoint reference only */
}
@keyframes intro {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}
.muted {
  color: rgba(255, 255, 255, 0.5);
}
iframe {
  border: 0;
}
main, footer {
  animation: intro 0.3s both;
  animation-delay: 0.15s;
}
footer time[datetime$="M"]:before {
  content: "\2013\0020";
}
@media only screen
  and ( max-width: 30em ) {
  footer time[datetime$="M"] {
    display: none;
  }
}
blockquote cite {
  display: block;
}
blockquote cite::before {
   content: "\2014";
}
:target {
  color: #fff;
}
/* hack.css overrides and enhancements */
.hack li ul {
  margin: 0;
}
.main {
  padding: 20px 10px;
}
nav a.active {
  background-color: #ff2e88;
  color: #fff;
}
a[itemprop="url"] {
  color: #ff9800;
}
a[itemprop="url"]:hover {
  color: #fff;
}
a[href*="://"]::after,
a[rel*="external"] {
  content: " " url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20class='i-external'%20viewBox='0%200%2032%2032'%20width='14'%20height='14'%20fill='none'%20stroke='%23ff9800'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='9.38%'%3E%3Cpath%20d='M14%209%20L3%209%203%2029%2023%2029%2023%2018%20M18%204%20L28%204%2028%2014%20M28%204%20L14%2018'/%3E%3C/svg%3E");
}
figure a[href*="://"]::after,
figure a[rel*="external"] {
  content: "";
}
html {
  font-size: 13px;
}
.hack pre {
  font-size: 17px;
}
article [itemprop="description"] {
  margin-bottom: 20px;
  margin-top: 20px;
}
@media screen and (min-width: 768px) {
  html {
    font-size: 1em;
  }
  .container {
    max-width: 50rem;
  }
}

  article {
    margin-bottom: 30px;
}

img {
    max-width: 780px;
    width: 100%;
}

/* dark */
.highlight,pre.highlight{background:#282c34;color:#abb2bf}.highlight pre{background:#282c34}.highlight .ge{font-style:italic}.highlight .gs{font-weight:700}.highlight .ow{font-weight:700}.highlight .n,.highlight .nf,.highlight .nn,.highlight .o,.highlight .p{color:#abb2bf}.highlight .c,.highlight .c1,.highlight .cm,.highlight .cp,.highlight .cs{color:#5c6370;font-style:italic}.highlight .sr,.highlight .ss{color:#56b6c2}.highlight .k,.highlight .kc,.highlight .kd,.highlight .kn,.highlight .kp,.highlight .kr,.highlight .kt{color:#c678dd}.highlight .l,.highlight .ld,.highlight .s,.highlight .s1,.highlight .s2,.highlight .sb,.highlight .sc,.highlight .sd,.highlight .se,.highlight .sh,.highlight .si,.highlight .sx{color:#98c379}.highlight .nt,.highlight .nx,.highlight .vi{color:#e06c75}.highlight .il,.highlight .m,.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo,.highlight .na{color:#d19a66}.highlight .bp,.highlight .nb,.highlight .nc,.highlight .nd,.highlight .ne,.highlight .ni,.highlight .nl,.highlight .no,.highlight .nv,.highlight .py,.highlight .vc,.highlight .vg{color:#e5c07b}.highlight .err{color:#fff;background-color:#e05252}.highlight .gd{color:#e05252}.highlight .gi{color:#43d08a}.highlight .w{color:#f8f8f2}.highlight .cpf{color:navy}.highlight .gu{color:#75715e}.highlight .lineno{color:#636d83;user-select:none}.highlight .hll{color:#abb2bf;background-color:#2c313a}.highlight .language-json .w+.s2{color:#e06c75}.highlight .language-json .kc{color:#56b6c2}

</style>

    
    
    
      <script async src="/js/bpgdec8a.js"></script>
      <script async src="/js/bpgdec8.js"></script>
      <script async src="/js/bpgdec.js"></script>
    
  </head>
  
  <body class="hack dark main container">
    <header>
  
  <nav itemscope itemtype="http://schema.org/SiteNavigationElement">
    
    
      <a itemprop="url" class="" href="/"><span itemprop="name">Home</span></a>
    
      <a itemprop="url" class="active" href="/post/"><span itemprop="name">Posts</span></a>
    
      <a itemprop="url" class="" href="/categories/"><span itemprop="name">Categories</span></a>
    
      <a itemprop="url" class="" href="/tags/"><span itemprop="name">Tags</span></a>
    
      <a itemprop="url" class="" href="/archive/"><span itemprop="name">Archive</span></a>
    
      <a itemprop="url" class="" href="/about/"><span itemprop="name">About</span></a>
    
      <a itemprop="url" class="" href="/contact/"><span itemprop="name">Contact</span></a>
    
  </nav>


</header>
    <main>
  <article itemscope itemtype="http://schema.org/BlogPosting">
    
<meta itemprop="name" content="Dont Fear the Makefile">
<meta itemprop="description" content="A simple Makefile tutorial describing the basics and todays possible usage">


<meta itemprop="datePublished" content="2018-02-16T00:00:00&#43;01:00" />
<meta itemprop="dateModified" content="2018-02-12T18:15:29&#43;01:00" />
<meta itemprop="wordCount" content="1400">

  <meta itemprop="image" content="https://maex.me/img/gnu.png">



<meta itemprop="keywords" content="unix,linux,programming,tutorial,build-tools," />

    <header>
      <h1 itemprop="headline">Dont Fear the Makefile</h1>
      <p class="muted">
        <svg style="margin-bottom:-3px" class="i-clock" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
  <circle cx="16" cy="16" r="14" />
  <path d="M16 8 L16 16 20 20" />
</svg>
<span>7 minute read</span>
<svg style="margin-bottom: -3px" class="i-edit" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="6.25%">
  <path d="M30 7 L25 2 5 22 3 29 10 27 Z M21 6 L26 11 Z M5 22 L10 27 Z" />
</svg>

  Published: <time datetime="2018-02-16T00:00:00&#43;01:00">16 Feb, 2018</time>


      </p>
    </header>
    
      <blockquote itemprop="description">A simple Makefile tutorial describing the basics and todays possible usage</blockquote>
    
    
  <details>
    <summary>Table of Contents</summary>
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#important">IMPORTANT</a></li>
<li><a href="#targets">Targets</a></li>
<li><a href="#dependents">Dependents</a></li>
<li><a href="#phony">PHONY</a></li>
<li><a href="#wildcards">Wildcards</a></li>
<li><a href="#variables">Variables</a></li>
<li><a href="#loops">Loops</a></li>
<li><a href="#shell">Shell</a></li>
<li><a href="#exports-path">Exports/$PATH</a></li>
<li><a href="#if-and-else">if and else</a></li>
<li><a href="#misc">Misc</a></li>
<li><a href="#real-life-makefiles">Real-life Makefiles</a></li>
</ul></li>
</ul>
</nav>
  </details>
  <script>
    const el = document.querySelector('details summary')
    el.onclick = () => {
      (function(l,o,a,d,e,r){e=o.createElement(a),r=o.getElementsByTagName(a)[0];e.async=1;e.src=d;r.parentNode.insertBefore(e,r)})(window,document,'script','/js/smoothscroll.js');
      el.onclick = null
    }
    document.querySelectorAll('#TableOfContents a').forEach(link => {
      link.addEventListener('click', () => {
        document.querySelector(
          link.href.slice(link.href.indexOf('#'))
        ).scrollIntoView({ behavior: 'smooth' })
      })
    })
  </script>


    <div itemprop="articleBody">
      

<hr />

<p><img src="/img/gnu.png" alt="GNU Logo" title="GNU Logo" /></p>

<h2 id="introduction">Introduction</h2>

<p>I&rsquo;m writing this because I have the feeling that many developers underestimate
the power of Makefiles and they are simply not aware of this nice and handy tool
which is installed on nearly every Unix-like machine.
To be honest, who have never executed a <code>make install</code> or something similar?
Most tutorials I&rsquo;ve found out there are bloated with stuff, more complex than
they would have to and you have to read pages after pages to get the basics.</p>

<hr />

<h2 id="important">IMPORTANT</h2>

<p>Please use tabs when following these examples as make will complain when used
with spaces as indentation.</p>

<hr />

<h2 id="targets">Targets</h2>

<p>A Makefile exists of targets. These targets are the ones you execute.
When you execute <code>make install</code> you trigger the <code>install</code> target of the Makefile,
when you run <code>make build</code> you trigger the <code>build</code> target.</p>

<p>A target can be as simply defined as:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make"><span style="color:#75715e"># this is the target
</span><span style="color:#75715e"></span><span style="color:#a6e22e">install</span><span style="color:#f92672">:</span>
	<span style="color:#75715e"># this will be executed when make install is called
</span><span style="color:#75715e"></span>	echo Hello World
</code></pre></div>

<p><code>install</code> is the target in this case and <code>echo Hello World</code> will be executed
when you trigger this target.</p>

<p>These targets can also execute multiple commands like this:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make"><span style="color:#75715e"># target
</span><span style="color:#75715e"></span><span style="color:#a6e22e">install</span><span style="color:#f92672">:</span>
	<span style="color:#75715e"># will be executed first
</span><span style="color:#75715e"></span>	echo hello 
	<span style="color:#75715e"># will be executed second
</span><span style="color:#75715e"></span>	echo World
</code></pre></div>

<p>If one of the commands is false the Makefile will stop the execution:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make"><span style="color:#75715e"># target
</span><span style="color:#75715e"></span><span style="color:#a6e22e">install</span><span style="color:#f92672">:</span>
	<span style="color:#75715e"># will be executed first
</span><span style="color:#75715e"></span>	echo Hello 
	<span style="color:#75715e"># will break here
</span><span style="color:#75715e"></span>	false
	<span style="color:#75715e"># will not be executed
</span><span style="color:#75715e"></span>	echo World
</code></pre></div>

<p>This will output:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ make install
<span style="color:#75715e"># will be executed first
</span><span style="color:#75715e"></span>echo hello
hello
<span style="color:#75715e"># will break here
</span><span style="color:#75715e"></span>false
make: *** <span style="color:#f92672">[</span>Makefile:6: install<span style="color:#f92672">]</span> Error <span style="color:#ae81ff">1</span></code></pre></div>

<p>You can see that in line 6 the error occurred.</p>

<hr />

<h2 id="dependents">Dependents</h2>

<p>So, but what is the cool thing about these targets? They remember when you have
executed them at last and only do this stuff again when the file is newer than
the last time you have called it.
But for that, your target has to be a file.
Create a file <code>myfile.sh</code> and add a basic</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/usr/bin/env bash 
</span><span style="color:#75715e"></span>
echo Hello World</code></pre></div>

<p>Then create a <code>Makefile</code>:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make"><span style="color:#75715e"># mytarget depends on myfile.sh
</span><span style="color:#75715e"></span><span style="color:#a6e22e">mytarget</span><span style="color:#f92672">:</span> myfile.sh
	<span style="color:#75715e"># copy myfile.s to mytarget
</span><span style="color:#75715e"></span>	cp -f myfile.sh mytarget
</code></pre></div>

<p>If everything is done correctly
you will get this output when running <code>make mytarget</code>:
<code>cp -f myfile.sh mytarget</code>. If you run it a second time you will see:
<code>make: 'mytarget' is up to date.</code>. You can try this as many times as you want.
If you now change the target, a simple <code>touch myfile</code> is enough since this
updates the last touched timestamp from the file, it will redo the copying.</p>

<p>But you can of course not only depend on files,
you can also depend on other targets. Watch this:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make"><span style="color:#a6e22e">target2</span><span style="color:#f92672">:</span>
	cp myfile.sh target2
	echo Hello 

<span style="color:#75715e"># target1 depends on target2
</span><span style="color:#75715e"></span><span style="color:#a6e22e">target1</span><span style="color:#f92672">:</span> target2
	echo World
</code></pre></div>

<p><code>target1</code> depends on <code>target2</code>, therefore <code>target2</code> is executed first.
What if <code>target1</code> depends on our former friend <code>myfile.sh</code>?</p>

<p>Check this out:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make"><span style="color:#a6e22e">target2</span><span style="color:#f92672">:</span> myfile.sh
	cp myfile.sh target2

<span style="color:#75715e"># target1 depends on target2
</span><span style="color:#75715e"></span><span style="color:#a6e22e">target1</span><span style="color:#f92672">:</span> target2
	echo World
</code></pre></div>

<p>At the first run you get this as output as expected:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ make target1
cp myfile.sh target2
echo Hello
Hello
echo World
World</code></pre></div>

<p>But at the second run you only get this:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ make target1
echo World
World</code></pre></div>

<p><code>target2</code> is already up to date so make doesn&rsquo;t have to rebuild this target.
When you touch <code>myfile.sh</code> or remove the <code>target2</code>-file you will get the output
of the former run. <code>target1</code> is no file, so sadly this <code>target</code> will be rebuild
every time.</p>

<p>A target doesn&rsquo;t necessarily need to have a body. It could also only be dependent
on other targets.
This would be valid:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make"><span style="color:#a6e22e">target2</span><span style="color:#f92672">:</span> myfile.sh
	cp myfile.sh target2
<span style="color:#a6e22e">target1</span><span style="color:#f92672">:</span> target2
</code></pre></div>

<p>And runs the <code>cp</code> command when <code>make target1</code> is called.
Of course, this is most useful when one target is dependent on more than one
targets. For example:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make"><span style="color:#a6e22e">all</span><span style="color:#f92672">:</span> lint test build

<span style="color:#a6e22e">build</span><span style="color:#f92672">:</span> someFile
	buildCommand

<span style="color:#a6e22e">test</span><span style="color:#f92672">:</span> someFile
	testCommand

<span style="color:#a6e22e">lint</span><span style="color:#f92672">:</span> someFile
	someLintCommadn
</code></pre></div>

<p>Now with <code>make all</code> everything is executed.
Or when you only want to execute build when the tests are passing:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make"><span style="color:#a6e22e">all</span><span style="color:#f92672">:</span> lint test build

<span style="color:#a6e22e">build</span><span style="color:#f92672">:</span> test someFile 
	buildCommand

<span style="color:#a6e22e">test</span><span style="color:#f92672">:</span> someFile
	testCommand

<span style="color:#a6e22e">lint</span><span style="color:#f92672">:</span> someFile
	someLintCommadn
</code></pre></div>

<p>If one command returns <code>false</code> - or you simply write <code>false</code> the make process
will be aborted there.</p>

<p>But, what if the target name is a folder?
Let&rsquo;s see, create a folder called dist: <code>mkdir dist</code></p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make"><span style="color:#a6e22e">dist</span><span style="color:#f92672">:</span> myfile.sh
	cp myfile.sh dist/myfile.sh
</code></pre></div>

<p>Now run <code>make dist</code> and you will get what output?
If you have read this article carefully you should know whats going on.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ make dist
make: <span style="color:#e6db74">&#39;dist&#39;</span> is up to date.</code></pre></div>

<p>The <code>dist</code>-folder was created after the file <code>myfile.sh</code> was last touched.
So make thinks <code>dist</code> was built after the last change of <code>myfile.sh</code> and should
be up to date. A simple <code>touch myfile.sh</code> is helping again.</p>

<hr />

<h2 id="phony">PHONY</h2>

<p>To rebuild a target every time it is called independent of last changes you
could add the special <code>.PHONY</code> keyword to that target.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make"><span style="color:#a6e22e">.PHONY</span><span style="color:#f92672">:</span> dist
<span style="color:#a6e22e">dist</span><span style="color:#f92672">:</span> myfile.sh
	cp myfile.sh dist/myfile.sh
</code></pre></div>

<p>Now every time you run <code>make dist</code> it is redoing what it is told.</p>

<hr />

<h2 id="wildcards">Wildcards</h2>

<p>There is a handy thing called wildcard. I think it does what everyone would
expect. For that create a bunch of <code>sh</code> files: <code>touch {1,2,3,4,5}.sh</code></p>

<p>Adjust your makefile to this:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make"><span style="color:#a6e22e">target</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">$(</span>wildcard ./*.sh<span style="color:#66d9ef">)</span>
	touch target
</code></pre></div>

<p>And after the first run, nothing is done, except you touch one of the shell
scripts regardless which one.</p>

<hr />

<h2 id="variables">Variables</h2>

<p>You could set variables inside the Makefile and use them.
For example:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make">ENTRY_FILE <span style="color:#f92672">=</span> Main.hs

<span style="color:#a6e22e">test</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">$(</span>ENTRY_FILE<span style="color:#66d9ef">)</span>
	testCommand

<span style="color:#a6e22e">build</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">$(</span>ENTRY_FILE<span style="color:#66d9ef">)</span>
	buildCommand

<span style="color:#960050;background-color:#1e0010">....</span>
</code></pre></div>

<p>Now you only need to change the <code>ENTRY_FILE</code> definition if the name of your
entry file should change. I think you can imagine many scenarios where this
could be useful.
Variables can be accessed with surround <code>$()</code>.</p>

<p>Of course, this can also be arrays. For this create two files:
<code>touch file1 file2</code> and try this:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make">MY_FILES <span style="color:#f92672">=</span> file1 file2

<span style="color:#a6e22e">myTarget</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">$(</span>MY_FILES<span style="color:#66d9ef">)</span>
	echo should rebuild
	touch myTarget
</code></pre></div>

<p>After the second turn, it doesn&rsquo;t rebuild. But touch one of both files and
It will rebuild.</p>

<p>The Wildcard would be working as a variable too:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make">MY_FILES <span style="color:#f92672">=</span> <span style="color:#66d9ef">$(</span>wildcard ./*.sh<span style="color:#66d9ef">)</span>

<span style="color:#a6e22e">myTarget</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">$(</span>MY_FILES<span style="color:#66d9ef">)</span>
	echo should rebuild
	touch myTarget
</code></pre></div>

<hr />

<h2 id="loops">Loops</h2>

<p>Loops are also possible.
For example, if you have a bunch of binaries and want to compress them after
building from <code>mybinaryX</code> to <code>mybinaryX.tar.gz</code>:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make">BINARIES <span style="color:#f92672">=</span> mybinary1 mybinary2 mybinary3

<span style="color:#a6e22e">compress-all-binaries</span><span style="color:#f92672">:</span> build-all-binaries
	<span style="color:#66d9ef">for</span> f in <span style="color:#66d9ef">$(</span>BINARIES<span style="color:#66d9ef">)</span>; <span style="color:#66d9ef">do</span>	  <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>		tar czf $$f.tar.gz $$f;	<span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>	<span style="color:#66d9ef">done</span>
	@rm <span style="color:#66d9ef">$(</span>BINARIES<span style="color:#66d9ef">)</span>
</code></pre></div>

<hr />

<h2 id="shell">Shell</h2>

<p>You could even run shell commands or scripts from inside the Makefile.
For example something like this:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make">PROGNAME <span style="color:#f92672">=</span> Today
LOWER_PROGNAME <span style="color:#f92672">=</span> <span style="color:#66d9ef">$(</span>shell echo <span style="color:#66d9ef">$(</span>PROGNAME<span style="color:#66d9ef">)</span> | tr A-Z a-z<span style="color:#66d9ef">)</span>
</code></pre></div>

<hr />

<h2 id="exports-path">Exports/$PATH</h2>

<p>It&rsquo;s also possible to export variables, this is especially useful for something
like the <code>$PATH</code>-variable. When you run JavaScript with npm-dependencies for
example all dependencies which have a binary would be sym-linked into
<code>./node_modules/.bin/</code> and you could do this:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make"><span style="color:#75715e"># Add node_modules binaries to $PATH
</span><span style="color:#75715e"></span><span style="color:#66d9ef">export </span>PATH <span style="color:#f92672">:=</span> ./node_modules/.bin:<span style="color:#66d9ef">$(</span>PATH<span style="color:#66d9ef">)</span>
</code></pre></div>

<p>Then you didn&rsquo;t have to put the full path before such a command, you could
simply call it like you would within an npm-script.</p>

<hr />

<h2 id="if-and-else">if and else</h2>

<p>What is also a really cool feature which I&rsquo;ve learned last week is that you
could natively use if and else statements in Makefiles.</p>

<p>For example, could I test if my Makefile was called with a specific
environment variable like this:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-make" data-lang="make"><span style="color:#75715e"># @ tells make to not print the command itself to stdout
</span><span style="color:#75715e"># only the commands output
</span><span style="color:#75715e"></span><span style="color:#a6e22e">called-with-version</span><span style="color:#f92672">:</span>
<span style="color:#960050;background-color:#1e0010">ifeq</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">$(</span>VERSION<span style="color:#66d9ef">)</span>,<span style="color:#f92672">)</span>
	@echo No version information given.
	@echo Please run this command like this:
	@echo VERSION<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>.0.0 make release
	@false
<span style="color:#960050;background-color:#1e0010">else</span>
	@echo <span style="color:#66d9ef">do</span> some other stuff
<span style="color:#960050;background-color:#1e0010">endif</span>
</code></pre></div>

<p>This means if the variable <code>$(VERSION)</code>, which would be passed via an environment
variable is empty execute the first block else the second.</p>

<p>There is also <code>ifneq</code> which means if not equal.</p>

<hr />

<h2 id="misc">Misc</h2>

<ul>
<li>You need <code>tabs</code> as indentation in a Makefile else wise it will complain</li>
<li>If you put an <code>@</code> before any command the command itself will not be passed to
<code>stdout</code> but you will receive the output of this command.</li>
<li>With the <code>-j</code> parameter you could run make with parallel execution</li>
<li>The complete documentation can be found here:
<a href="https://www.gnu.org/software/make/manual/html_node/index.html" title="GNU Make Documentation" target="_blank">Link</a></li>
</ul>

<hr />

<h2 id="real-life-makefiles">Real-life Makefiles</h2>

<p>Here are some real Makefiles I&rsquo;ve written myself.
Some examples are taken from there but I think this can give you some
inspiration how to use them in real projects.
They are sorted from simpler to more complex ones
but that might change over time.</p>

<ul>
<li><a href="https://github.com/mstruebing/today.hs/blob/master/Makefile" title="Today.hs Makefile" target="_blank">Today.hs Makefile</a></li>
<li><a href="https://github.com/mstruebing/tldr/blob/master/Makefile" title="TLDR Makefile" target="_blank">TLDR Makefile</a></li>
<li><a href="https://github.com/neos/neos-ui/blob/master/Makefile" title="Neos-UI Makefile" target="_blank">Neos-UI Makefile</a></li>
</ul>

    </div>
    
    <footer>
      <hr>
      <p>
  Published
  
    
      by <span itemprop="author">Max Strübing</span>
    
  
  <time itemprop="datePublished" datetime="2018-02-16T00:00:00&#43;01:00">
    16 Feb, 2018
  </time>
  
    in <span itemprop="articleSection"><a href="/categories/tech/">tech</a></span>
  
  
    and tagged <a href="/tags/build-tools/">build-tools</a>, <a href="/tags/linux/">linux</a>, <a href="/tags/programming/">programming</a>, <a href="/tags/tutorial/">tutorial</a> and <a href="/tags/unix/">unix</a>
  
  using <span itemprop="wordCount">1400</span> words.
</p>

      


  <aside>
    <header>Related Content</header>
    <ul>
      
        <li><a href="/2016/11/execute-multiple-commands-on-files-with-find/">Execute multiple commands on files with find</a>
        <time datetime="2M">2 minutes</time>
      
        <li><a href="/2017/01/why-i-like-wc/">Why I like wc</a>
        <time datetime="3M">3 minutes</time>
      
        <li><a href="/2016/06/writing-a-simple-cli-tool-in-haskell/">Writing a simple CLI-tool in Haskell</a>
        <time datetime="14M">14 minutes</time>
      
        <li><a href="/2017/10/raspberry-pi-as-a-music-server/">Raspberry Pi as a Music Server</a>
        <time datetime="8M">8 minutes</time>
      
        <li><a href="/2016/11/you-might-not-need-scripty/">You might not need scripty</a>
        <time datetime="2M">2 minutes</time>
      
    </ul>
  </aside>


    </footer>
  </article>
</main>
    <footer>
  
  <p class="muted">
    This page was generated using
    <a target="_blank" rel="noopener" href="https://comfusion.github.io/after-dark/">After Dark</a>
    for
    <a target="_blank" rel="noopener" href="https://gohugo.io/">Hugo</a>.
  </p>


</footer>
  </body>
</html>
